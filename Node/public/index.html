<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Zoe</title>
		<link href="lib/bootstrap/bootstrap.2.1.1/css/bootstrap.min.css" rel="stylesheet">
		<link href="lib/bootstrap/bootstrap.2.1.1/css/bootstrap-responsive.min.css" rel="stylesheet">
		<link href="index.css" rel="stylesheet">
		<script src="lib/underscore/underscore.1.4.2/underscore-min.js"></script>
		<script src="lib/jquery/jquery.1.8.2/jquery-1.8.2.js"></script>
		<script src="lib/knockout/knockout.2.1.0/knockout-2.1.0.debug.js"></script>
		<script src="lib/bootstrap/bootstrap.2.1.1/js/bootstrap.min.js"></script>
		<script src="Person.js"></script>
		<script src="Type.js"></script>
		<script src="TypeMeta.js"></script>
        <script src="TypeData.js"></script>
		<script src="IndexViewModel.js"></script>
		<script src="index.js"></script>
	</head>
	<body>
		<div class="container-fluid" style="min-height: 100%">

			<div class="navbar">
				<div class="navbar-inner">
					<a class="brand" href="#">
						<strong>Zoe</strong> (<span data-bind="text: personMeta.fullName"></span>)
					</a>
				</div>
			</div>

			<div class="content-div row-fluid">
				<ul class="span3 nav nav-pills nav-stacked well" data-bind="foreach: types">
					<li data-bind="css: { active: $root.current() === $data }">
					    <a href="#" data-toggle="pill" data-bind ="click: $root.onClickTab, text: prettyName">
					    </a>
					</li>
				</ul>
				<div class="span9 tab-content well" data-bind="template: { name: getTypeTemplate, foreach: types }"></div>
			</div>
		</div>

		<script type="text/html" id="type-template-default">
			<div class="tab-pane" data-bind="css: { active: $root.current() === $data }">
				<p>This is the default template</p>
				<p data-bind="text: name"></p>
			</div>
		</script>

	    <script type="text/html" id="type-template-bodyWeight">
	        <div class="tab-pane" data-bind="css: { active: $root.current() === $data }">
                     

	            <div data-bind="if: $parent.current().meta().length">
	                <p data-bind="text: $parent.current().meta()[0].prettyName"></p>
	            </div>
	            Weight: <input data-bind="value: $parent.current().current().value, valueUpdate: 'afterkeydown'" />

	            <button data-bind="click: $parent.current().add">Submit</button>
                
	            <div class="body-weight-list-content">	                        

	                <table class="table">
	                    <thead>
	                        <tr>
	                            <th></th>
	                            <th>Weight</th>
	                            <th>Date</th>
	                        </tr>
	                    </thead>
	                    <tbody data-bind="foreach: $root.current().data">
	                        <tr>
	                            <td>
	                                <a ><i class="icon-remove"></i></a>
	                                <a><i class="icon-edit"></i></a>
	                            </td>
	                            <td data-bind="text: $data.value"></td>
	                            <td data-bind="text: $data.createdOn().toLocaleString()"></td>
	                        </tr>
	                        <tr data-bind="attr: { id: 'alert_' + $data._id()}" class="alert alert-block alert-error fade in">
	                            <td colspan="3">
                                    <a class="btn btn-danger" data-bind="click: $parent.delete" href="#">Delete</a> 
	                                <a class="btn" data-dismiss="alert" href="#">Cancel</a>
	                            </td>
	                        </tr>
	                    </tbody>
	                </table>
	            </div>

	            <!--				<p data-bind="text: ko.toJSON( $parent.current().meta() )"></p>-->
<!--				<p data-bind="text: ko.toJSON( $parent.current().data() )"></p>-->
			</div>
		</script>

	</body>
</html>